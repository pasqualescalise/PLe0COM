VAR base, exponent : int;

PROCEDURE func1(x, y : int);
	VAR result : int;

	PROCEDURE square(x : int);
		VAR ressquare : int;
		BEGIN
			ressquare := x * x;
			print ressquare
			{XXX: this fails like it would in C but maybe it doesn't have to}
			{CALL powerWithFors(2, 2)}
		END;

	PROCEDURE powerWithFors(x, y : int);
		VAR respow : int;

		PROCEDURE func2(x, y : int);
			VAR respow, i : int;
			BEGIN
				respow := 1;
				for i := 0; i < y; i := i + 1 DO BEGIN
					respow := respow * x
				END;
				print respow
			END;

		BEGIN
			CALL func2(x, y);
			CALL square(x)
		END;

	BEGIN
		CALL square(x);
		CALL square(y);
		CALL powerWithFors(x, y);
		CALL powerWithFors(y, x)
	END;

BEGIN
	base := 3;
	exponent := 4;
	CALL func1(base, exponent)
END.
